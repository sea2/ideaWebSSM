(function(a){a.fn.jzoom=function(b){return this.each(function(){var t={width:400,height:400,position:"right",offsetX:20,offsetY:0,opacity:0.6,bgColor:"#fff",loading:"Loading..."};b=a.extend(true,t,b);var c=a(this);var h=c.css("position");if(h==="static"){c.css("position","relative")}c.find("img").css({width:c.width()+"px",height:c.height()+"px"});var l=a("<div></div>");l.css({position:"absolute",zIndex:"990",opacity:t.opacity,cursor:"move",border:"1px solid #ccc",backgroundColor:t.bgColor});var n=a("<div></div>");var k,u;switch(t.position){case"top":k=0;u=-c.height()-t.offsetY;break;case"right":k=c.width()+t.offsetX;u=0;break;case"bottom":k=0;u=c.height()+t.offsetY;break;case"left":k=-c.width()-t.offsetX;u=0;break}n.css({left:k+"px",top:u+"px",width:t.width+"px",height:t.height+"px",position:"absolute",zIndex:"999",overflow:"hidden",border:"1px solid #ccc",fontSize:"20px",textAlign:"center",lineHeight:t.height+"px"});var q=i(t.suffixName,t.imgType);n.append(q).append(t.loading);var r=0,j=c.offset(),f,d,g,e,o,m;c.mouseenter(function(){l.show();n.show();if(r===0){p();r++}}).mousemove(function(v){g=s(v.pageX,j.left,l.width(),f);e=s(v.pageY,j.top,l.height(),d);l.css({left:g+"px",top:e+"px"});q.css({left:-g*o+"px",top:-e*m+"px"})}).mouseleave(function(){l.hide();n.hide()});function i(w,z){var x=c.find("img").attr("src");w=w||"_big";var v=x.lastIndexOf(".");z=z||x.substring(v+1);var y=x.substring(0,v)+w+"."+z;var A=a("<img>").attr("src",y).css("position","absolute");return A}function p(){c.append(l).append(n);var w=q.width()/c.width();var v=q.height()/c.height();l.css({width:n.width()/w+"px",height:n.height()/v+"px"});f=c.width()-l.outerWidth();d=c.height()-l.outerHeight();o=(q.width()-n.width())/f;m=(q.height()-n.height())/d}function s(y,z,x,v){var w,A=y-z-x/2;if(A>=0&&A<=v){w=A}else{if(A<0){w=0}else{w=v}}return w}})}})(jQuery);
