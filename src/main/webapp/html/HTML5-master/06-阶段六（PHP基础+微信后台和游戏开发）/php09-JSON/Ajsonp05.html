<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>实例</title>
		<style>
			#box{
				width: 400px;
				margin: 50px auto 0;
			}
			#list{
				list-style: none;
				padding: 0px;
				margin: 0;
			}
			input{
				width: 400px;
				height: 35px;
				font-size: 18px;
				box-sizing: border-box;
				padding-left: 5px;
			}
		</style>
	</head>
	<body>
		<div id="box">
			<input type="text" name="text" id="text" placeholder="👁.👁百度一下😏"/>
			<ul id="list">
			</ul>
		</div>
	</body>
	<script>
		//回调函数
		function callBack(jsonO){
			console.log(jsonO);
			//return;
			var arr = jsonO.s;
			var list = document.getElementById("list");
			//清空列表
			list.innerHTML = "";
			for(var i = 0; i < arr.length; i++){
				var li = document.createElement("li");
				li.innerHTML = arr[i];
				list.appendChild(li);
			}
		}
		//1.jsonp回调函数名字不能重复
		//2.callBack 必须是全局函数，保证在任何地方被调用
//		function callBack(){
//			alert(11);
//		}
	</script>
	<script>
		//callBack("11111");
		var textIn = document.getElementById("text");
		
		//修改src
		textIn.onkeyup = function(){
			var api = "Ajsonp05.php?wd="+textIn.value+"&abc=callBack";
			//1.创建一个script
			var sct = document.createElement("script");
			//设置src属性
			sct.src = api;
			//必须添加到页面内，才开始网络请求：send()；
			var head = document.querySelector("head");
			head.appendChild(sct);
			//用完移出
			head.removeChild(sct);
		};
	</script>
</html>
